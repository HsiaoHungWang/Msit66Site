
@{
    ViewData["Title"] = "Member";
}

<h1>Member</h1>
<div class="row">
    <div class="col-9">會員清單</div>
    <div class="col-3">
        <h3 class="text-center">會員新增</h3>
        <form id="memberForm">
            <div class="mb-3">
                <label for="InputName" class="form-label">姓名</label>
                <input type="text" class="form-control" id="InputName" name="name">
                <div id="nameHelp" class="form-text"></div>
            </div>
            <div class="mb-3">
                <label for="InputEmail" class="form-label">電子郵件</label>
                <input type="email" class="form-control" id="InputEmail" name="email">
            </div>
            <div class="mb-3">
                <label for="InputPassword" class="form-label">密碼</label>
                <input type="password" class="form-control" id="InputPassword" name="password">
            </div>
            <div class="mb-3">
                <label for="InputPassword1" class="form-label">密碼確認</label>
                <input type="password" class="form-control" id="InputPassword1" name="password1">
            </div>
            <div class="mb-3">
                <label for="InputAge" class="form-label">年紀</label>
                <input type="number" class="form-control" id="InputAge" name="age">
            </div>
            <div class="mb-3">
                <label for="formFile" class="form-label">頭像</label>
                <input class="form-control" type="file" id="formFile" name="file">
            </div>
            <button type="submit" class="btn btn-primary" id="buttonSubmit">註冊</button>
        </form>

    </div>
</div>

@section Scripts{
    <script>
        const btnSubmit = document.querySelector('#buttonSubmit');
        const frmMember = document.querySelector('#memberForm');
        const apiUrl = 'https://localhost:7194/api/members';
        btnSubmit.addEventListener('click',async(event)=>{
          event.preventDefault(); //停止Submit行為

          const formData = new FormData(frmMember);

          const response = await fetch(apiUrl,{
              method:'POST',
              body:formData
          });

          if(response.ok){
              alert('新增成功');
          }



        })
    </script>
}

